# DAO-PHP
This is a PHP implementation of a data access object using PDO. This library offers basic database manipulation capabilities, automating basic [Create-Read-Update-Delete](https://en.wikipedia.org/wiki/Create,_read,_update_and_delete) tasks. Currently tested on MySQL, MariaDB, SQLite and PostgreSQL

* Important: It is compatible with mysql if it uses ANSI mode. Make sure that tables were creaded in ANSI mode and set ANSI Mode when creating the PDO connection

```php
$connection = new PDO($connectionString, $db['user'], $db['password'], [PDO::MYSQL_ATTR_INIT_COMMAND => 'SET sql_mode="ANSI"']); 
```

Using it is simple. First you define your DAO:

```php
include_once 'dao.class.php';

$myDAO = new DAO(
    // PDO Connection string
    new PDO("sqlite:./test.sqlite"),
    // DB Table name
    'table',
    // Mapping of table column names and PDO param types
    [
        'id'            => PDO::PARAM_INT,
        'columnone'     => PDO::PARAM_STR,
        'columntwo'     => PDO::PARAM_STR,
        'active'        => PDO::PARAM_STR
    ],
    [
        // Defines which column is the primary key (requirement of this library)
        DAO::KEY                    => 'id',
        // Specifies whether the primary key is auto generated or not. 
        DAO::KEY_IS_AUTOGENERATED   => true
        DAO::DEL_METHOD             => DAO::DEL_METHOD_DEACTIVATE,
        DAO::DEACTIVATE_COLUMN      => 'active',

    ]

);
```

Now you have an object which is ready to perform basic CRUD operations without writing one line of SQL:

```php
// Creates a new object in the database. Note that id doesn't need to be specified if it
// is autogenerated in database and this information was passed in the constructor
$id = $myDAO->create(['columnone'=>'abc', columntwo=>'xyz']);

// Retrieves the object with given primary key
$object = $myDAO->get($id);

// Checks the existence of the object without retrieving it
$itExists =  $myDAO->exists($id);
$itDoesNotExist =  $myDAO->exists('BLAHBLAHBLAH');

// Retrieves a list of objects
$result = $myDAO->list();

// Deletes the object
$result = $myDAO->del($id);
```

